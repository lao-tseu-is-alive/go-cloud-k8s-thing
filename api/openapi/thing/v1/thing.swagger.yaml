swagger: "2.0"
info:
  title: thing/v1/thing.proto
  version: version not set
tags:
  - name: ThingService
consumes:
  - application/json
produces:
  - application/json
paths:
  /thing:
    get:
      summary: List returns a list of things based on filters
      operationId: ThingService_List
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: limit
          in: query
          required: false
          type: integer
          format: int32
        - name: offset
          in: query
          required: false
          type: integer
          format: int32
        - name: type
          in: query
          required: false
          type: integer
          format: int32
        - name: created_by
          in: query
          required: false
          type: integer
          format: int32
        - name: inactivated
          in: query
          required: false
          type: boolean
        - name: validated
          in: query
          required: false
          type: boolean
      tags:
        - ThingService
    post:
      summary: Create creates a new thing
      operationId: ThingService_Create
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CreateResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: thing
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1Thing'
      tags:
        - ThingService
  /thing/by-external-id/{external_id}:
    get:
      summary: ListByExternalId returns things filtered by external ID
      operationId: ThingService_ListByExternalId
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListByExternalIdResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: external_id
          in: path
          required: true
          type: integer
          format: int32
        - name: limit
          in: query
          required: false
          type: integer
          format: int32
        - name: offset
          in: query
          required: false
          type: integer
          format: int32
      tags:
        - ThingService
  /thing/count:
    get:
      summary: Count returns the number of things matching filters
      operationId: ThingService_Count
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CountResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: keywords
          in: query
          required: false
          type: string
        - name: type
          in: query
          required: false
          type: integer
          format: int32
        - name: created_by
          in: query
          required: false
          type: integer
          format: int32
        - name: inactivated
          in: query
          required: false
          type: boolean
        - name: validated
          in: query
          required: false
          type: boolean
      tags:
        - ThingService
  /thing/geojson:
    get:
      summary: GeoJson returns things as a GeoJSON string
      operationId: ThingService_GeoJson
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GeoJsonResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: limit
          in: query
          required: false
          type: integer
          format: int32
        - name: offset
          in: query
          required: false
          type: integer
          format: int32
        - name: type
          in: query
          required: false
          type: integer
          format: int32
        - name: created_by
          in: query
          required: false
          type: integer
          format: int32
        - name: inactivated
          in: query
          required: false
          type: boolean
        - name: validated
          in: query
          required: false
          type: boolean
      tags:
        - ThingService
  /thing/search:
    get:
      summary: Search returns a list based on keywords
      operationId: ThingService_Search
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1SearchResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: keywords
          in: query
          required: false
          type: string
        - name: limit
          in: query
          required: false
          type: integer
          format: int32
        - name: offset
          in: query
          required: false
          type: integer
          format: int32
        - name: type
          in: query
          required: false
          type: integer
          format: int32
        - name: created_by
          in: query
          required: false
          type: integer
          format: int32
        - name: inactivated
          in: query
          required: false
          type: boolean
        - name: validated
          in: query
          required: false
          type: boolean
      tags:
        - ThingService
  /thing/{id}:
    get:
      summary: Get retrieves a thing by ID
      operationId: ThingService_Get
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: id
          in: path
          required: true
          type: string
      tags:
        - ThingService
    delete:
      summary: Delete removes a thing
      operationId: ThingService_Delete
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1DeleteResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: id
          in: path
          required: true
          type: string
      tags:
        - ThingService
    put:
      summary: Update modifies a thing
      operationId: ThingService_Update
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1UpdateResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: id
          in: path
          required: true
          type: string
        - name: thing
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1Thing'
      tags:
        - ThingService
definitions:
  protobufAny:
    type: object
    properties:
      '@type':
        type: string
    additionalProperties: {}
  protobufNullValue:
    type: string
    enum:
      - NULL_VALUE
    default: NULL_VALUE
    description: |-
      `NullValue` is a singleton enumeration to represent the null value for the
      `Value` type union.

      The JSON representation for `NullValue` is JSON `null`.

       - NULL_VALUE: Null value.
  rpcStatus:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
      details:
        type: array
        items:
          type: object
          $ref: '#/definitions/protobufAny'
  v1CountResponse:
    type: object
    properties:
      count:
        type: integer
        format: int32
  v1CreateResponse:
    type: object
    properties:
      thing:
        $ref: '#/definitions/v1Thing'
  v1DeleteResponse:
    type: object
    title: Empty, maps to 204 No Content typically
  v1GeoJsonResponse:
    type: object
    properties:
      result:
        type: string
        title: Raw JSON string
  v1GetResponse:
    type: object
    properties:
      thing:
        $ref: '#/definitions/v1Thing'
  v1ListByExternalIdResponse:
    type: object
    properties:
      things:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1ThingList'
  v1ListResponse:
    type: object
    properties:
      things:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1ThingList'
  v1SearchResponse:
    type: object
    properties:
      things:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1ThingList'
  v1Thing:
    type: object
    properties:
      id:
        type: string
        title: UUID
      type_id:
        type: integer
        format: int32
      name:
        type: string
      description:
        type: string
      comment:
        type: string
      external_id:
        type: integer
        format: int32
      external_ref:
        type: string
      build_at:
        type: string
        format: date-time
      status:
        type: string
        description: 'Enum: "Planifi√©", "En Construction", etc.'
      contained_by:
        type: string
        title: UUID
      contained_by_old:
        type: integer
        format: int32
      inactivated:
        type: boolean
      inactivated_time:
        type: string
        format: date-time
      inactivated_by:
        type: integer
        format: int32
      inactivated_reason:
        type: string
      validated:
        type: boolean
      validated_time:
        type: string
        format: date-time
      validated_by:
        type: integer
        format: int32
      managed_by:
        type: integer
        format: int32
      created_at:
        type: string
        format: date-time
      created_by:
        type: integer
        format: int32
      last_modified_at:
        type: string
        format: date-time
      last_modified_by:
        type: integer
        format: int32
      deleted:
        type: boolean
      deleted_at:
        type: string
        format: date-time
      deleted_by:
        type: integer
        format: int32
      more_data:
        type: object
        title: JSON Object
      pos_x:
        type: number
        format: double
      pos_y:
        type: number
        format: double
  v1ThingList:
    type: object
    properties:
      id:
        type: string
      type_id:
        type: integer
        format: int32
      name:
        type: string
      description:
        type: string
      external_id:
        type: integer
        format: int32
      inactivated:
        type: boolean
      validated:
        type: boolean
      status:
        type: string
      created_by:
        type: integer
        format: int32
      created_at:
        type: string
        format: date-time
      pos_x:
        type: number
        format: double
      pos_y:
        type: number
        format: double
  v1UpdateResponse:
    type: object
    properties:
      thing:
        $ref: '#/definitions/v1Thing'
