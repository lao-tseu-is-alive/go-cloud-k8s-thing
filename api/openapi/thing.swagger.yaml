swagger: "2.0"
info:
  title: thing/v1/thing.proto
  version: version not set
tags:
  - name: ThingService
  - name: TypeThingService
consumes:
  - application/json
produces:
  - application/json
paths:
  /thing:
    get:
      summary: |-
        List returns a list of things.
        Returns the thing in an array.
      operationId: List
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: limit
          description: maximum number of results to return
          in: query
          required: false
          type: integer
          format: int32
        - name: offset
          description: offset rows to skip before returning rows
          in: query
          required: false
          type: integer
          format: int32
        - name: type
          description: TypeThing id to filter by the things to return
          in: query
          required: false
          type: integer
          format: int32
        - name: createdBy
          description: id of the creator to filter by the things to return
          in: query
          required: false
          type: integer
          format: int32
        - name: inactivated
          description: inactivated flag to filter the things to return
          in: query
          required: false
          type: boolean
        - name: validated
          description: validation flag to filter the things to return
          in: query
          required: false
          type: boolean
      tags:
        - ThingService
    post:
      summary: |-
        Create creates a new thing.
        Creates a new thing.
      operationId: Create
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CreateResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: thing
          description: Thing to add
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1Thing'
      tags:
        - ThingService
  /thing/by-external-id/{externalId}:
    get:
      summary: |-
        ListByExternalId returns a list of thing filtered by externalId.
        Returns the things in an array.
      operationId: ListByExternalId
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListByExternalIdResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: externalId
          description: externalId of the things needed
          in: path
          required: true
          type: integer
          format: int32
        - name: limit
          in: query
          required: false
          type: integer
          format: int32
        - name: offset
          in: query
          required: false
          type: integer
          format: int32
      tags:
        - ThingService
  /thing/count:
    get:
      summary: |-
        Count returns the number of thing based on search criterias.
        Returns the number of things found after filtering with passed criterias.
      operationId: Count
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CountResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: keywords
          in: query
          required: false
          type: string
        - name: type
          in: query
          required: false
          type: integer
          format: int32
        - name: createdBy
          in: query
          required: false
          type: integer
          format: int32
        - name: inactivated
          in: query
          required: false
          type: boolean
        - name: validated
          in: query
          required: false
          type: boolean
      tags:
        - ThingService
  /thing/geojson:
    get:
      summary: |-
        List returns a geoJson of things found.
        Returns the geoJson of the thing selected by the given parameters.
      operationId: GeoJson
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GeoJsonResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: limit
          in: query
          required: false
          type: integer
          format: int32
        - name: offset
          in: query
          required: false
          type: integer
          format: int32
        - name: type
          in: query
          required: false
          type: integer
          format: int32
        - name: createdBy
          in: query
          required: false
          type: integer
          format: int32
        - name: inactivated
          in: query
          required: false
          type: boolean
        - name: validated
          in: query
          required: false
          type: boolean
      tags:
        - ThingService
  /thing/search:
    get:
      summary: |-
        Search returns a list of thing based on search criterias.
        Returns the thing in an array.
      operationId: Search
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1SearchResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: keywords
          description: text keywords to filter the things to return
          in: query
          required: false
          type: string
        - name: limit
          in: query
          required: false
          type: integer
          format: int32
        - name: offset
          in: query
          required: false
          type: integer
          format: int32
        - name: type
          in: query
          required: false
          type: integer
          format: int32
        - name: createdBy
          in: query
          required: false
          type: integer
          format: int32
        - name: inactivated
          in: query
          required: false
          type: boolean
        - name: validated
          in: query
          required: false
          type: boolean
      tags:
        - ThingService
  /thing/{id}:
    get:
      summary: |-
        Get retrieves in backend all information about a specific thingId.
        Retrieve a specific thing.
      operationId: Get
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: id
          description: Id of the thing
          in: path
          required: true
          type: string
      tags:
        - ThingService
    delete:
      summary: |-
        Delete allows to delete a specific thingId.
        delete a thing.
      operationId: Delete
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1DeleteResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: id
          description: Id of the thing
          in: path
          required: true
          type: string
      tags:
        - ThingService
    put:
      summary: |-
        Update allows to modify information about a specific thingId.
        Updates the status of a thing.
      operationId: Update
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1UpdateResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: id
          description: Id of the thing
          in: path
          required: true
          type: string
        - name: thing
          description: informations related to the thing
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1Thing'
      tags:
        - ThingService
  /types:
    get:
      summary: |-
        TypeThingList returns a list of types.
        Returns the types in an array.
      operationId: List
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1TypeThingListResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: keywords
          in: query
          required: false
          type: string
        - name: createdBy
          in: query
          required: false
          type: integer
          format: int32
        - name: externalId
          in: query
          required: false
          type: integer
          format: int32
        - name: inactivated
          in: query
          required: false
          type: boolean
        - name: limit
          in: query
          required: false
          type: integer
          format: int32
        - name: offset
          in: query
          required: false
          type: integer
          format: int32
      tags:
        - TypeThingService
    post:
      summary: |-
        TypeThingCreate will create a new group.
        Creates a new group.
      operationId: Create
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1TypeThingCreateResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: typeThing
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1TypeThing'
      tags:
        - TypeThingService
  /types/count:
    get:
      summary: |-
        Count returns the number of TypeThing based on search criterias.
        Returns the number of TypeThings found after filtering with passed criterias.
      operationId: Count
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1TypeThingCountResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: keywords
          in: query
          required: false
          type: string
        - name: createdBy
          in: query
          required: false
          type: integer
          format: int32
        - name: inactivated
          in: query
          required: false
          type: boolean
      tags:
        - TypeThingService
  /types/{id}:
    get:
      summary: |-
        TypeThingGet will retrieve in backend all information about a specific typeThingId.
        Retrieve a specific typeThing.
      operationId: Get
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1TypeThingGetResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: id
          in: path
          required: true
          type: integer
          format: int32
      tags:
        - TypeThingService
    delete:
      summary: |-
        TypeThingDelete allows to delete a specific typeThingId.
        delete a typeThing.
      operationId: Delete
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1TypeThingDeleteResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: id
          in: path
          required: true
          type: integer
          format: int32
      tags:
        - TypeThingService
    put:
      summary: |-
        TypeThingUpdate allows to modify information about a specific typeThingId.
        Updates the information related to a typeThing.
      operationId: Update
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1TypeThingUpdateResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: id
          in: path
          required: true
          type: integer
          format: int32
        - name: typeThing
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1TypeThing'
      tags:
        - TypeThingService
definitions:
  protobufAny:
    type: object
    properties:
      '@type':
        type: string
    additionalProperties: {}
  protobufNullValue:
    type: string
    enum:
      - NULL_VALUE
    default: NULL_VALUE
    description: |-
      `NullValue` is a singleton enumeration to represent the null value for the
      `Value` type union.

      The JSON representation for `NullValue` is JSON `null`.

       - NULL_VALUE: Null value.
  rpcStatus:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
      details:
        type: array
        items:
          type: object
          $ref: '#/definitions/protobufAny'
  v1CountResponse:
    type: object
    properties:
      count:
        type: integer
        format: int32
  v1CreateResponse:
    type: object
    properties:
      thing:
        $ref: '#/definitions/v1Thing'
  v1DeleteResponse:
    type: object
    title: Empty, maps to 204 No Content typically
  v1GeoJsonResponse:
    type: object
    properties:
      result:
        type: string
        title: Returns the geoJson of the thing selected by the givven parameters
  v1GetResponse:
    type: object
    properties:
      thing:
        $ref: '#/definitions/v1Thing'
  v1ListByExternalIdResponse:
    type: object
    properties:
      things:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1ThingList'
  v1ListResponse:
    type: object
    properties:
      things:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1ThingList'
  v1SearchResponse:
    type: object
    properties:
      things:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1ThingList'
  v1Thing:
    type: object
    properties:
      id:
        type: string
        title: |-
          identifiant uuid v4
          cet Universally unique identifier (UUID) sera généré automatiquement pour vous
      typeId:
        type: integer
        format: int32
        title: |-
          identifiant du type d'objet
          FK sur la clé primaire du TypeThing de cet objet
      name:
        type: string
        title: nom de cet objet
      description:
        type: string
        title: description
      comment:
        type: string
        title: commentaire
      externalId:
        type: integer
        format: int32
        title: identifiant numérique externe
      externalRef:
        type: string
        title: référence externe
      buildAt:
        type: string
        format: date-time
        title: date de construction
      status:
        type: string
        title: Status (e.g. "Planifié", "En Construction", "Utilisé", "Abandonné", "Démoli")
      containedBy:
        type: string
        title: contenu par (UUID)
      containedByOld:
        type: integer
        format: int32
      inactivated:
        type: boolean
        title: inactivé?
      inactivatedTime:
        type: string
        format: date-time
        title: date d'inactivation
      inactivatedBy:
        type: integer
        format: int32
        title: utilisateur ayant désactivé
      inactivatedReason:
        type: string
        title: raison de'inactivation
      validated:
        type: boolean
        title: validé?
      validatedTime:
        type: string
        format: date-time
        title: date de validation
      validatedBy:
        type: integer
        format: int32
        title: utiliateur ayant validé
      managedBy:
        type: integer
        format: int32
        title: utilisateur/groupe manager
      createdAt:
        type: string
        format: date-time
        title: |-
          date création
          date de création de cet enregistrement dans la base
        readOnly: true
      createdBy:
        type: integer
        format: int32
        title: |-
          utilisateur ayant créé cet enregistrement
          identifiant de l'utilisateur ayant créé cet enregistrement
      lastModifiedAt:
        type: string
        format: date-time
        title: |-
          date modification
          date de la dernière modication de cet enregistrement
        readOnly: true
      lastModifiedBy:
        type: integer
        format: int32
        title: |-
          utilisateur ayant effectué la modification
          utilisateur ayant effectué la dernière modication de cet enregistrement
      deleted:
        type: boolean
        title: |-
          effacé?
          cet enregisrement a été marqué comme effacé
      deletedAt:
        type: string
        format: date-time
        title: |-
          date effacé
          date à laquelle cet enregisrement a été marqué comme effacé
      deletedBy:
        type: integer
        format: int32
        title: |-
          utilisateur ayant effacé
          utilisateur ayant demandé de marquer cet enregisrement comme effacé
      moreData:
        type: object
        title: |-
          Informations complémentaires
          permet de stocker des attributs complémentaires au format json
      posX:
        type: number
        format: double
        title: Coordonnées X de cet objet
      posY:
        type: number
        format: double
        title: Coordonnées Y de cet objet
    required:
      - id
      - typeId
      - name
      - inactivated
      - createdBy
      - deleted
      - posX
      - posY
  v1ThingList:
    type: object
    properties:
      id:
        type: string
      typeId:
        type: integer
        format: int32
      name:
        type: string
      description:
        type: string
      externalId:
        type: integer
        format: int32
      inactivated:
        type: boolean
      validated:
        type: boolean
      status:
        type: string
      createdBy:
        type: integer
        format: int32
      createdAt:
        type: string
        format: date-time
      posX:
        type: number
        format: double
      posY:
        type: number
        format: double
    title: A light version of Thing for lists
  v1TypeThing:
    type: object
    properties:
      id:
        type: integer
        format: int32
      name:
        type: string
      description:
        type: string
      comment:
        type: string
      externalId:
        type: integer
        format: int32
      tableName:
        type: string
      geometryType:
        type: string
      inactivated:
        type: boolean
      inactivatedTime:
        type: string
        format: date-time
      inactivatedBy:
        type: integer
        format: int32
      inactivatedReason:
        type: string
      managedBy:
        type: integer
        format: int32
      iconPath:
        type: string
      createdAt:
        type: string
        format: date-time
      createdBy:
        type: integer
        format: int32
      lastModifiedAt:
        type: string
        format: date-time
      lastModifiedBy:
        type: integer
        format: int32
      deleted:
        type: boolean
      deletedAt:
        type: string
        format: date-time
      deletedBy:
        type: integer
        format: int32
      moreDataSchema:
        type: object
    required:
      - id
      - name
      - inactivated
      - iconPath
      - createdBy
      - deleted
  v1TypeThingCountResponse:
    type: object
    properties:
      count:
        type: integer
        format: int32
  v1TypeThingCreateResponse:
    type: object
    properties:
      typeThing:
        $ref: '#/definitions/v1TypeThing'
  v1TypeThingDeleteResponse:
    type: object
  v1TypeThingGetResponse:
    type: object
    properties:
      typeThing:
        $ref: '#/definitions/v1TypeThing'
  v1TypeThingList:
    type: object
    properties:
      id:
        type: integer
        format: int32
      name:
        type: string
      externalId:
        type: integer
        format: int32
      iconPath:
        type: string
      createdAt:
        type: string
        format: date-time
      tableName:
        type: string
      geometryType:
        type: string
      inactivated:
        type: boolean
    title: A light version of TypeThing for lists
  v1TypeThingListResponse:
    type: object
    properties:
      typeThings:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1TypeThingList'
  v1TypeThingUpdateResponse:
    type: object
    properties:
      typeThing:
        $ref: '#/definitions/v1TypeThing'
  v1UpdateResponse:
    type: object
    properties:
      thing:
        $ref: '#/definitions/v1Thing'
